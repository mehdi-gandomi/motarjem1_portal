{% extends 'admin/layout/admin.twig' %}

{% block content %}
    <main class="main">
        <div class="card card-default" style="min-height:550px">
            <div class="card-body">
                <h4 class="mt-4">مدیریت کاربران</h4>
                <div class="orders-heading">
                    <form class="table-filter">
                        <label class="label-cbx" for="customers">
                            {% if "customer" in user_filter %}
                                <input checked class="invisible" id="customers" name="user_filter" type="checkbox" value="customer"/>
                            {% else %}
                                <input class="invisible" id="customers" name="user_filter" type="checkbox" value="customer"/>
                            {% endif %}
                            <div class="checkbox">
                                <svg height="20px" viewbox="0 0 20 20" width="20px">
                                    <path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>
                                    <polyline points="4 11 8 15 16 6"></polyline>
                                </svg>
                            </div>
                            <span>مشتریان
                                </span>
                        </label>
                        <label class="label-cbx" for="translator">
                            {% if "translator" in user_filter %}
                                <input checked class="invisible" id="translator" name="user_filter" type="checkbox" value="translator"/>
                            {% else %}
                                <input class="invisible" id="translator" name="user_filter" type="checkbox" value="translator"/>
                            {% endif %}
                            <div class="checkbox">
                                <svg height="20px" viewbox="0 0 20 20" width="20px">
                                    <path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>
                                    <polyline points="4 11 8 15 16 6"></polyline>
                                </svg>
                            </div>
                            <span>مترجم ها
                                </span>
                        </label>
                        <label class="label-cbx" for="active_state">
                            {% if "1" in active_state %}
                                <input checked class="invisible" id="active_state" name="active_state" type="checkbox" value="1"/>
                            {% else %}
                                <input class="invisible" id="active_state" name="active_state" type="checkbox" value="1"/>
                            {% endif %}
                            <div class="checkbox">
                                <svg height="20px" viewbox="0 0 20 20" width="20px">
                                    <path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>
                                    <polyline points="4 11 8 15 16 6"></polyline>
                                </svg>
                            </div>
                            <span>حساب های فعال
                                </span>
                        </label>
                        <label class="label-cbx" for="deactivate_state">
                            {% if "0" in active_state %}
                                <input checked class="invisible" id="deactivate_state" name="active_state" type="checkbox" value="0"/>
                            {% else %}
                                <input class="invisible" id="deactivate_state" name="active_state" type="checkbox" value="0"/>
                            {% endif %}
                            <div class="checkbox">
                                <svg height="20px" viewbox="0 0 20 20" width="20px">
                                    <path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>
                                    <polyline points="4 11 8 15 16 6"></polyline>
                                </svg>
                            </div>
                            <span>حساب های غیر فعال
                                </span>
                        </label>
                    </form>
                </div>
                <table class="table OrdersTable is--responsive">
                    <thead>
                    <tr>
                        <th class="bg-teal-dark text-center">تصویر کاربر</th>
                        <th class="bg-teal-dark text-center">نام کاربر</th>
                        <th class="bg-teal-dark text-center">نام کاربری</th>
                        <th class="bg-teal-dark text-center">نوع کاربر</th>
                        <th class="bg-teal-dark text-center">وضعیت حساب کاربری</th>
                        <th class="bg-teal-dark text-center">تاریخ ثبت نام</th>
                        <th class="bg-teal-dark text-center">عملیات</th>
                    </tr>
                    </thead>
                    <tbody id="usersWrap">
                    {% for user in users %}
                        <tr>
                            <td data-label="تصویر کاربر">
                                <img class="userAvatae" src="/public/uploads/avatars/translator/{{user.avatar}}" alt="">
                            </td>
                            <td data-label="نام کاربر">
                                {{user.fname ~ " " ~ user.lname}}
                            </td>
                            <td data-label="نام کاربری">
                                {{user.username}}
                            </td>
                            <td data-label="نوع کاربری">
                                {{user.is_translator ? "مترجم":"مشتری"}}
                            </td>
                            <td data-label="وضعیت حساب کاربری">
                                {{ user.is_active ? "فعال" }}
                            </td>
                            <td data-label="تاریخ ثبت نام">
                                {{ user.register_date_persian }}
                            </td>
                            <td class="order-actions" data-label="عملیات">
                            <td data-label="عملیات" class="order-actions">
                                <button onclick="showUserInfo('{{ user.user_id  }}','{{ user.is_translator ? "translator":"user" }}')" class="expand-button order-action is--primary is--medium">
                                    <span data-hover="جزییات بیشتر">
                                        <i class="icon-info"></i>
                                    </span>
                                </button>
                                <button onclick="showUserInfo('{{ user.user_id  }}','{{ user.is_translator ? "translator":"user" }}')" class="expand-button order-action is--default is--large">
                                    <span data-hover="غیر فعال کردن حساب">
                                        <i class="icon-lock"></i>
                                    </span>
                                </button>
                                <button onclick="deleteUser('{{ user.user_id  }}','{{ user.is_translator ? "translator":"user" }}')" class="expand-button order-action is--danger">
                                    <span data-hover="حذف کاربر">
                                        <i class="icon-user-unfollow"></i>
                                    </span>
                                </button>

                            </td>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
                {% include 'admin/includes/pagination.twig' with { 'count' :count, 'current_page' :current_page, 'base_path' :'/admin/user/manage', 'offset' : 10, 'visible_numbers' : 3 } %}
            </div>
        </div>
    </main>
{% endblock %}