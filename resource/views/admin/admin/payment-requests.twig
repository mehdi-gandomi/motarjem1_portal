{% extends 'admin/layout/admin.twig' %}
{% block content %}
    <main class="main">
        <div class="card card-default" style="min-height:550px">
            <div class="card-body">
                <h4 class="mt-4">درخواست های پرداخت مترجمان</h4>
                <div class="orders-heading">
                    <form class="table-filter">
                        <label class="label-cbx" for="waiting">
                            {% if "-1" in state %}
                                <input checked class="invisible" id="waiting" name="state" type="checkbox" value="-1"/>
                            {% else %}
                                <input class="invisible" id="waiting" name="state" type="checkbox" value="-1"/>
                            {% endif %}
                            <div class="checkbox">
                                <svg height="20px" viewbox="0 0 20 20" width="20px">
                                    <path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>
                                    <polyline points="4 11 8 15 16 6"></polyline>
                                </svg>
                            </div>
                            <span>درانتظار تایید
                            </span>
                        </label>
                        <label class="label-cbx" for="accepted">
                            {% if "1" in state %}
                                <input checked class="invisible" id="accepted" name="state" type="checkbox" value="1"/>
                            {% else %}
                                <input class="invisible" id="accepted" name="state" type="checkbox" value="1"/>
                            {% endif %}
                            <div class="checkbox">
                                <svg height="20px" viewbox="0 0 20 20" width="20px">
                                    <path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>
                                    <polyline points="4 11 8 15 16 6"></polyline>
                                </svg>
                            </div>
                            <span>تایید شده
                            </span>
                        </label>
                        <label class="label-cbx" for="denied">
                            {% if "0" in state %}
                                <input checked class="invisible" id="denied" name="state" type="checkbox" value="0"/>
                            {% else %}
                                <input class="invisible" id="denied" name="state" type="checkbox" value="0"/>
                            {% endif %}
                            <div class="checkbox">
                                <svg height="20px" viewbox="0 0 20 20" width="20px">
                                    <path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>
                                    <polyline points="4 11 8 15 16 6"></polyline>
                                </svg>
                            </div>
                            <span>زد شده
                            </span>
                        </label>
                        <label class="label-cbx" for="paid">
                            {% if "1" in paid %}
                                <input checked class="invisible" id="paid" name="paid" type="checkbox" value="1"/>
                            {% else %}
                                <input class="invisible" id="paid" name="paid" type="checkbox" value="1"/>
                            {% endif %}
                            <div class="checkbox">
                                <svg height="20px" viewbox="0 0 20 20" width="20px">
                                    <path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>
                                    <polyline points="4 11 8 15 16 6"></polyline>
                                </svg>
                            </div>
                            <span>پرداخت شده
                            </span>
                        </label>
                        <label class="label-cbx" for="not-paid">
                            {% if "0" in paid %}
                                <input checked class="invisible" id="not-paid" name="paid" type="checkbox" value="0"/>
                            {% else %}
                                <input class="invisible" id="not-paid" name="paid" type="checkbox" value="0"/>
                            {% endif %}
                            <div class="checkbox">
                                <svg height="20px" viewbox="0 0 20 20" width="20px">
                                    <path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>
                                    <polyline points="4 11 8 15 16 6"></polyline>
                                </svg>
                            </div>
                            <span>پرداخت نشده
                            </span>
                        </label>
                    </form>
                </div>
                <table class="table OrdersTable is--responsive">
                    <thead>
                        <tr>
                            <th class="bg-teal-dark text-center">#</th>
                            <th class="bg-teal-dark text-center">نام مترجم</th>
                            <th class="bg-teal-dark text-center">مبلغ درخواستی</th>
                            <th class="bg-teal-dark text-center">تاریخ درخواست</th>
                            <th class="bg-teal-dark text-center">وضعیت تایید</th>
                            <th class="bg-teal-dark text-center">وضعیت پرداخت</th>
                            <th class="bg-teal-dark text-center">عملیات</th>
                        </tr>
                    </thead>
                    <tbody id="paymentRequests">
                        {% for request in payment_requests %}
                            <tr>
                                <td data-label="ردیف">
                                    {{request.id}}
                                </td>
                                <td data-label="نام مترجم">
                                    <a aria-role="button" href="javascript:void()" onclick="showTranslatorInfo('{{request.translator_id}}')">{{request.translator_fname ~ " " ~ request.translator_lname}}</a>
                                </td>
                                <td data-label="مبلغ درخواستی">
                                    {{request.amount | number_format}}
                                    تومان
                                </td>
                                <td data-label="تاریخ درخواست">
                                    {{request.request_date_persian}}
                                </td>
                                <td data-label="وضعیت تایید">
                                    {% if request.state == "-1" %}درانتظار تایید
                                    {% endif %}
                                    {% if request.state == "0" %}رد شده
                                    {% endif %}
                                    {% if request.state == "1" %}تایید شده
                                    {% endif %}
                                </td>
                                <td data-label="وضعیت پرداخت">
                                    {{request.is_paid == "1" ? "پرداخت شده":"پرداخت نشده"}}
                                </td>
                                <td class="order-actions" data-label="عملیات">
                                    {% if request.state == "1" %}
                                        <button class="expand-button order-action is--primary is--large" onclick="showPaymentModal('{{request.id}}')">
                                            <span data-hover="ثبت اطلاعات پرداخت">
                                                <i class="icon-info"></i>
                                            </span>
                                        </button>
                                    {% endif %}
                                    {% if request.state == "-1" %}
                                        <button class="expand-button order-action is--success is--medium" onclick="acceptRequest('{{request.id}}')">
                                            <span data-hover="قبول درخواست">
                                                <i class="icon-check"></i>
                                            </span>
                                        </button>
                                        <button class="expand-button order-action is--danger" onclick="denyRequest('{{request.id}}')">
                                            <span data-hover="رد درخواست">
                                                <i class="icon-close"></i>
                                            </span>
                                        </button>
                                    {% endif %}
                                    {% if request.state == "0" %}
                                        <button class="expand-button order-action is--success is--medium" onclick="acceptRequest('{{request.id}}')">
                                            <span data-hover="قبول درخواست">
                                                <i class="icon-check"></i>
                                            </span>
                                        </button>
                                    {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% include 'admin/includes/pagination.twig' with { 'count' :count, 'current_page' :current_page, 'base_path' :'/admin/translator/payment-requests', 'offset' : 10, 'visible_numbers' : 3 } %}
            </div>
        </div>
    </main>
{% endblock %}
{% block script_below %}
    <script src="/public/js/panel/admin-payment-requests.js"></script>
{% endblock %}